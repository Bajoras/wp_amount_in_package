jQuery(function(a){let t=function(t){let e=parseFloat(a(t.target.parentElement).find('input[id^="package_amount_quantity_"]').val()),n=a(t.target.parentElement).find('input[id^="package_quantity_"]'),i=n.closest(".quantity"),_=i.find('input[id^="quantity_"]'),p=i.find(".dk_package_amount_summary span.quantity_wrapper > span.amount_quantity"),o=i.find(".dk_package_amount_summary span.total_real_wrapper > span.amount_real_amount"),r=i.find(".dk_package_amount_summary span.weight_wrapper"),c=r.find("span.weight"),u=r.find("span.single_weight"),s=parseFloat(u.text()||0),m=i.find(".dk_package_amount_summary span.price_wrapper"),d=m.find("span.price"),l=m.find("span.single_price"),g=parseFloat(l.text()||0);if((isNaN(e)||0===e)&&(e=1),isNaN(s)||0===s?(s=0,r.hide()):r.show(),isNaN(g)||0===g?(g=0,m.hide()):m.show(),a(t.target.parentElement).find(".dk_package_amount_summary span.amount").text(e.toFixed(3)),""===n.val())_.val(1),p.text(1),o.text(e);else{let a=Math.ceil(n.val()/e);_.val(a),p.text(a),o.text((a*e).toFixed(3)),u.text(s),c.text(a*s),d.text((a*g).toFixed(_price_settings.woocommerce_price_num_decimals).replace(".",_price_settings.woocommerce_price_decimal_sep).replace(new RegExp("\\d(?=(\\d{3})+"+_price_settings.woocommerce_price_decimal_sep+")","g"),"$&"+_price_settings.woocommerce_price_thousand_sep))}};a(document.body).on("calculate",function(a){t(a)}),a(document.body).on("keyup change",'input[id^="package_quantity_"]',function(t){a(this).trigger("calculate")}),a(document.body).on("found_variation",function(t,e){let n=a(t.target);n.find('input[name^="_amount_in_package"]').val(e.variation_amount_in_package);let i=parseFloat(n.find('input[name^="_requested_amount_in_package"]').val());i=isNaN(i)?e.min_qty:(i=i>parseFloat(e.max_qty)?e.max_qty:i)<parseFloat(e.min_qty)?e.min_qty:i,n.find('input[name^="_requested_amount_in_package"]').val(i),n.find("span.after_amount_in_package").val(e.variation_amount_in_package_unit),n.find(".dk_package_amount_summary span.package_amount_unit").each(function(){a(this).text(e.variation_amount_in_package_unit)}),n.find("span.weight_wrapper > span.single_weight").text(e.weight),n.find("span.price_wrapper > span.single_price").text(e.display_price),n.trigger("calculate")})});